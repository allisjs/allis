{"version":3,"sources":["packages/iscorrect/src/mobileNo/constant.ts","packages/iscorrect/src/mobileNo/helper.ts","packages/iscorrect/src/mobileNo/locale.ts","packages/iscorrect/src/mobileNo/index.ts"],"sourcesContent":["export const ChinaTelecom = '中国电信';\nexport const ChinaUnicom = '中国联通';\nexport const ChinaMobile = '中国移动';\nexport const ChinaBroadnet = '中国广电';\nexport const ChinaSatelliteCommunications = '中国卫通';\nexport const Tiantong1 = '中国电信（天通一号）';\n\nexport const DataCard = 'dataCard';\nexport const VirtualOperator = 'virtualOperator';\nexport const Satellite = 'satellite';\nexport const InternetOfThings = 'internetOfThings';\nexport const specialTypesName: any = {\n  [DataCard]: '上网卡',\n  [VirtualOperator]: '虚拟运营商',\n  [Satellite]: '卫星通信',\n  [InternetOfThings]: '物联网',\n};\n\nexport const MDN = {\n  CC: '86',\n  MAC: {\n    common: {\n      '133': ChinaTelecom,\n      '153': ChinaTelecom,\n      '173': ChinaTelecom,\n      '177': ChinaTelecom,\n      '180': ChinaTelecom,\n      '181': ChinaTelecom,\n      '189': ChinaTelecom,\n      '190': ChinaTelecom,\n      '191': ChinaTelecom,\n      '193': ChinaTelecom,\n      '199': ChinaTelecom,\n      '130': ChinaUnicom,\n      '131': ChinaUnicom,\n      '132': ChinaUnicom,\n      '155': ChinaUnicom,\n      '156': ChinaUnicom,\n      '166': ChinaUnicom,\n      '167': ChinaUnicom,\n      '171': ChinaUnicom,\n      '175': ChinaUnicom,\n      '176': ChinaUnicom,\n      '185': ChinaUnicom,\n      '186': ChinaUnicom,\n      '196': ChinaUnicom,\n      '1340': ChinaMobile,\n      '1341': ChinaMobile,\n      '1342': ChinaMobile,\n      '1343': ChinaMobile,\n      '1344': ChinaMobile,\n      '1345': ChinaMobile,\n      '1346': ChinaMobile,\n      '1347': ChinaMobile,\n      '1348': ChinaMobile,\n      '135': ChinaMobile,\n      '136': ChinaMobile,\n      '137': ChinaMobile,\n      '138': ChinaMobile,\n      '139': ChinaMobile,\n      '1440': ChinaMobile,\n      '148': ChinaMobile,\n      '150': ChinaMobile,\n      '151': ChinaMobile,\n      '152': ChinaMobile,\n      '157': ChinaMobile,\n      '158': ChinaMobile,\n      '159': ChinaMobile,\n      '172': ChinaMobile,\n      '178': ChinaMobile,\n      '182': ChinaMobile,\n      '183': ChinaMobile,\n      '184': ChinaMobile,\n      '187': ChinaMobile,\n      '188': ChinaMobile,\n      '1951': ChinaMobile,\n      '197': ChinaMobile,\n      '198': ChinaMobile,\n      '192': ChinaBroadnet,\n    },\n    [DataCard]: {\n      '145': ChinaUnicom,\n      '147': ChinaMobile,\n      '149': ChinaTelecom,\n    },\n    [VirtualOperator]: {\n      '1700': ChinaTelecom,\n      '1701': ChinaTelecom,\n      '1702': ChinaTelecom,\n      '1762': ChinaTelecom,\n      '1703': ChinaMobile,\n      '1705': ChinaMobile,\n      '1706': ChinaMobile,\n      '165': ChinaMobile,\n      '1704': ChinaUnicom,\n      '1707': ChinaUnicom,\n      '1708': ChinaUnicom,\n      '1709': ChinaUnicom,\n      '171': ChinaUnicom,\n      '167': ChinaUnicom,\n    },\n    [Satellite]: {\n      '1349': ChinaSatelliteCommunications,\n      '174': Tiantong1,\n    },\n    [InternetOfThings]: {\n      '140': ChinaTelecom,\n      '141': ChinaMobile,\n      '148': ChinaMobile,\n      '144': ChinaUnicom,\n      '146': ChinaUnicom,\n    },\n  },\n  length: 11,\n};\n\nexport const DefaultOptions = {\n  loose: false,\n  rules: {\n    [DataCard]: true,\n    [VirtualOperator]: true,\n    [Satellite]: true,\n    [InternetOfThings]: true,\n  },\n};\n","import { MDN } from './constant';\n\nexport function cleanCC(mobileNo: string): string {\n  return mobileNo.replace(/^\\+86/, '');\n}\n\nexport function cleanMobile(mobileNo: string): string {\n  return mobileNo.replace(/\\s+|-/g, '');\n}\n\nexport function findMAC(\n  mobileNo: string,\n  type = 'common',\n): { MAC: string; type: string; operator: string } | void {\n  const MACs = (MDN.MAC as any)[type];\n  for (const MAC in MACs) {\n    if (mobileNo.startsWith(MAC)) {\n      return {\n        MAC,\n        type,\n        operator: MACs[MAC],\n      };\n    }\n  }\n}\n","export default {\n  'success': '校验通过',\n  'non-string': '输入必须是非空字符串',\n  'invalid': '手机号码不正确',\n  'invalid-cc': '国际区号不正确',\n  'invalid-length': '手机号码长度不正确',\n  'invalid-mac': '手机号段不存在',\n  'non-allowed-mac': '未开启对该手机号段的校验规则',\n  'non-allowed-cc': '不支持带国际区号的手机号码',\n};\n","import { DefaultOptions, MDN, specialTypesName } from './constant';\nimport { cleanCC, cleanMobile, findMAC } from './helper';\nimport { MobileNoOptions, MobileNoResult } from './types';\nimport DefaultLocale from './locale';\n\nexport default function isCNMobile(\n  mobileNo: unknown,\n  options: MobileNoOptions = {},\n): MobileNoResult {\n  const { loose, rules } = {\n    ...DefaultOptions,\n    ...options,\n    rules: { ...DefaultOptions.rules, ...(options.rules || {}) },\n  } as MobileNoOptions;\n  const locale = { ...DefaultLocale, ...(options.locale || {}) };\n\n  if (typeof mobileNo !== 'string' || !mobileNo.trim()) {\n    return {\n      target: mobileNo,\n      valid: false,\n      msg: locale['non-string'],\n    };\n  }\n\n  if (mobileNo.startsWith('+') && !mobileNo.startsWith(`+${MDN.CC}`)) {\n    return {\n      target: mobileNo,\n      valid: false,\n      msg: locale['invalid-cc'],\n    };\n  }\n\n  const localNumber =\n    loose === true ? cleanMobile(cleanCC(mobileNo)) : cleanCC(mobileNo);\n\n  if (localNumber.length !== MDN.length) {\n    return {\n      target: mobileNo,\n      valid: false,\n      msg: locale['invalid-length'],\n    };\n  }\n\n  if (!localNumber.startsWith('1')) {\n    return {\n      target: mobileNo,\n      valid: false,\n      msg: locale['invalid'],\n    };\n  }\n\n  for (const target of Object.keys(MDN.MAC)) {\n    const result = findMAC(localNumber, target);\n    if (result) {\n      const { MAC, operator, type } = result;\n      const allowed = type === 'common' || rules?.[type] === true;\n      return {\n        target: mobileNo,\n        valid: allowed,\n        CC: '86',\n        MAC,\n        operator,\n        type: specialTypesName[type] || '普通卡',\n        formatted: {\n          international: `+86${localNumber}`,\n          local: localNumber,\n        },\n        msg: allowed ? locale['success'] : locale['non-allowed-mac'],\n      };\n    }\n  }\n\n  return {\n    target: mobileNo,\n    valid: false,\n    msg: locale['invalid-mac'],\n  };\n}\n"],"names":[],"mappings":"+PAAO,IAAM,EAAe,2BACf,EAAc,2BACd,EAAc,2BAKd,EAAW,WACX,EAAkB,kBAClB,EAAY,YACZ,EAAmB,mBACnB,EAAwB,CACnC,CAAC,EAAS,CAAE,qBACZ,CAAC,EAAgB,CAAE,iCACnB,CAAC,EAAU,CAAE,2BACb,CAAC,EAAiB,CAAE,oBACtB,EAEa,EAAM,CACjB,GAAI,KACJ,IAAK,CACH,OAAQ,CACN,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,KAAQ,EACR,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,KAAQ,EACR,IAAO,EACP,IAAO,EACP,IA3EuB,0BA4EzB,EACA,CAAC,EAAS,CAAE,CACV,IAAO,EACP,IAAO,EACP,IAAO,CACT,EACA,CAAC,EAAgB,CAAE,CACjB,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,IAAO,EACP,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,KAAQ,EACR,IAAO,EACP,IAAO,CACT,EACA,CAAC,EAAU,CAAE,CACX,KAlGsC,2BAmGtC,IAlGmB,8DAmGrB,EACA,CAAC,EAAiB,CAAE,CAClB,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,EACP,IAAO,CACT,CACF,EACA,OAAQ,EACV,EAEa,EAAiB,CAC5B,MAAO,CAAA,EACP,MAAO,CACL,CAAC,EAAS,CAAE,CAAA,EACZ,CAAC,EAAgB,CAAE,CAAA,EACnB,CAAC,EAAU,CAAE,CAAA,EACb,CAAC,EAAiB,CAAE,CAAA,CACtB,CACF,EC1HO,SAAS,EAAQ,CAAgB,EACtC,OAAO,EAAS,OAAO,CAAC,QAAS,IACnC,KCJA,EAAe,CACb,QAAW,2BACX,aAAc,+DACd,QAAW,6CACX,aAAc,6CACd,iBAAkB,yDAClB,cAAe,6CACf,kBAAmB,uFACnB,iBAAkB,gFACpB,ECJe,SAAS,EACtB,CAAiB,CACjB,EAA2B,CAAC,CAAC,EAE7B,GAAM,CAAE,MAAA,CAAK,CAAE,MAAA,CAAK,CAAE,CAAG,CACvB,GAAG,CAAc,CACjB,GAAG,CAAO,CACV,MAAO,CAAE,GAAG,EAAe,KAAK,CAAE,GAAI,EAAQ,KAAK,EAAI,CAAC,CAAC,AAAE,CAC7D,EACM,EAAS,CAAE,GAAG,CAAa,CAAE,GAAI,EAAQ,MAAM,EAAI,CAAC,CAAC,AAAE,EAE7D,GAAI,AAAoB,UAApB,OAAO,GAAyB,CAAC,EAAS,IAAI,GAChD,MAAO,CACL,OAAQ,EACR,MAAO,CAAA,EACP,IAAK,CAAM,CAAC,aAAa,AAC3B,EAGF,GAAI,EAAS,UAAU,CAAC,MAAQ,CAAC,EAAS,UAAU,CAAC,CAAC,CAAC,EAAE,EAAI,EAAE,CAAC,CAAC,EAC/D,MAAO,CACL,OAAQ,EACR,MAAO,CAAA,EACP,IAAK,CAAM,CAAC,aAAa,AAC3B,EAGF,IAAM,EACJ,AAAU,CAAA,IAAV,EF1BK,AE0BwB,EAAQ,GF1BvB,OAAO,CAAC,SAAU,IE0BkB,EAAQ,GAE5D,GAAI,EAAY,MAAM,GAAK,EAAI,MAAM,CACnC,MAAO,CACL,OAAQ,EACR,MAAO,CAAA,EACP,IAAK,CAAM,CAAC,iBAAiB,AAC/B,EAGF,GAAI,CAAC,EAAY,UAAU,CAAC,KAC1B,MAAO,CACL,OAAQ,EACR,MAAO,CAAA,EACP,IAAK,EAAO,OAAU,AACxB,EAGF,IAAK,IAAM,KAAU,OAAO,IAAI,CAAC,EAAI,GAAG,EAAG,CACzC,IAAM,EAAS,AF1CZ,SACL,CAAgB,CAChB,EAAO,QAAQ,EAEf,IAAM,EAAO,AAAC,EAAI,GAAG,AAAQ,CAAC,EAAK,CACnC,IAAK,IAAM,KAAO,EAChB,GAAI,EAAS,UAAU,CAAC,GACtB,MAAO,CACL,IAAA,EACA,KAAA,EACA,SAAU,CAAI,CAAC,EAAI,AACrB,EAGN,EE4B2B,EAAa,GACpC,GAAI,EAAQ,CACV,GAAM,CAAE,IAAA,CAAG,CAAE,SAAA,CAAQ,CAAE,KAAA,CAAI,CAAE,CAAG,EAC1B,EAAU,AAAS,WAAT,GAAqB,OAAA,SAAA,CAAO,CAAC,EAAK,IAAK,CAAA,EACvD,MAAO,CACL,OAAQ,EACR,MAAO,EACP,GAAI,KACJ,IAAA,EACA,SAAA,EACA,KAAM,CAAgB,CAAC,EAAK,EAAI,qBAChC,UAAW,CACT,cAAe,CAAC,GAAG,EAAE,EAAY,CAAC,CAClC,MAAO,CACT,EACA,IAAK,EAAU,EAAO,OAAU,CAAG,CAAM,CAAC,kBAAkB,AAC9D,EACF,CACF,CAEA,MAAO,CACL,OAAQ,EACR,MAAO,CAAA,EACP,IAAK,CAAM,CAAC,cAAc,AAC5B,EACF"}